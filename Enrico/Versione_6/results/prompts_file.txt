

### CONFIGURATION DATA ###
	Question: List all rooms with active occupancy sensors.
	Language Model: llama3.1:latest
	Embedding Model: nomic-embed-text:latest

### QUESTION PROMPT ###

You are an expert Cypher generator: your task is to generate Cypher query that best answers the user question.

Follow these guidelines:
    1. Write ONLY a syntactically correct Cypher query: nothing else. 
    2. DO NOT invent properties, relationships or objects: read the database schema.   
    3. Keep the queries simple, readable and deterministic. 
    
    
Here's the database schema:

Use these values for the 'name' property
Occupancy_sensor_1
Occupancy_sensor_2
Occupancy_sensor_5
Occupancy_sensor_4
Occupancy_sensor_3
Living_room

Here's some property values
{'name': 'Occupancy_sensor_1', 'value': [False]}
{'name': 'Occupancy_sensor_2', 'value': [False]}

Each label has these properties
Label: `NamedIndividual` has ONLY these properties: ['setting', 'value', 'state', 'unit', 'name']
Label: `Room` has ONLY these properties: ['name']
Label: `Class` has ONLY these properties: ['name']

Use this SUBCLASSOF relationship schema
(:Occupancy_sensor)-[:SUBCLASSOF]->(:Boolean_sensor) 
(:Brightness_sensor)-[:SUBCLASSOF]->(:Categorical_sensor) 
(:Boolean_sensor)-[:SUBCLASSOF]->(:Sensor) 

These are the relationship types per labels
(:Room)-[:CONTAINS]->(:NamedIndividual)
(:NamedIndividual)-[:LOCATED_IN]->(:Room)
(:NamedIndividual)-[:LOCATED_IN]->(:NamedIndividual)

### CHAT HISTORY ###

You are a helpful assistant.

Is the coffee machine on?

MATCH (cm:NamedIndividual {name: 'Coffee_machine_1'}) WHERE cm.state = ['on'] RETURN count(cm) > 0 AS is_on

Check the temperature setting of air conditioners.

MATCH (ac:NamedIndividual)-[:MEMBEROF]->(c:Class {name:'Air_conditioner'}) RETURN ac.setting

What devices are currently on in the kitchen?

MATCH (d:NamedIndividual)-[:LOCATED_IN]->(r:Room {name: 'Kitchen'}) WHERE d.state =['on'] RETURN d.name

Which rooms contain dimmable lights?

MATCH (r:Room)-[:CONTAINS]->(dl:NamedIndividual), (dl:NamedIndividual)-[:MEMBEROF]->(cls:Class{name:'Dimmable_light'}) RETURN r

List all appliances in the bathroom

MATCH (b:Room{name:'Bathroom'})-[:CONTAINS]->(n:NamedIndividual)-[:MEMBEROF]->(a:Class {name:'Appliance'}) RETURN n.name 

### ANSWER PROMPT ###

You are a helpful smart assistant.
You'll receive the results of the query, written in Cypher language: explain these results in a natural way.
Please, be synthetic: read the results and explain them by answering to the user question.  
    

### CONTEXT ###

Answer the user question by describing the results provided by Neo4j: 
Original user question: "List all rooms with active occupancy sensors."
Result from Neo4j: [{'r.name': 'Study'}, {'r.name': 'Bedroom'}, {'r.name': 'Kitchen'}]

### ANSWER ###

The rooms with active occupancy sensors are:

* The Study
* The Bedroom
* The Kitchen

These rooms have occupancy sensors that are currently detecting activity.

#########################

